<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title> HOORIA... ‚ú®</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Dancing+Script:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg1:#FFF0F4; /* very light blush */
      --bg2:#FFE6F0; /* soft peach-pink */
      --accent:#FF6F9E; /* heart pink */
      --soft:#FADADD; /* blush */
      --cream:#FFF6EC;
      --text:#4a2f3f;
      --muted:#8a5970;
      --glass: rgba(255,255,255,0.6);
      --shadow: 0 12px 30px rgba(78,22,60,0.12);
    }

    *{box-sizing:border-box}
    html,body{height:100%;}
    body{
      margin:0;
      font-family: 'Poppins', system-ui, -apple-system, sans-serif;
      background: linear-gradient(180deg,var(--bg1),var(--bg2));
      display:flex;
      align-items:center;
      justify-content:center;
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow:hidden;
    }

    /* App shell */
    .app{
      width:min(920px,96vw);
      height:min(760px,94vh);
      background: linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.8));
      border-radius:22px;
      padding:28px;
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
      display:grid;
      grid-template-rows: auto 1fr auto;
      align-items:start;
    }

    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .logo{
      display:flex;align-items:center;gap:12px;
    }
    .logo .mark{
      background:linear-gradient(135deg,#FFB3CC,#FF6F9E);
      width:56px;height:56px;border-radius:14px;display:grid;place-items:center;color:white;font-weight:700;font-size:20px;box-shadow:0 8px 18px rgba(255,111,158,0.18)
    }
    .logo h3{font-size:1.05rem;margin:0}
    .controls{display:flex;gap:10px;align-items:center}

    /* cute cursor */
    .heart-cursor{cursor:none}
    .custom-cursor{
      position:fixed;pointer-events:none;z-index:9999;width:28px;height:28px;border-radius:8px;transform:translate(-50%,-50%);display:grid;place-items:center;font-size:16px;transition:transform .12s ease}

    /* main content area */
    .main{
      display:flex;flex-direction:column;align-items:center;justify-content:center;padding:24px;gap:18px;position:relative;
    }

    .title{
      text-align:center;
    }
    .title h1{font-size:1.9rem;margin:0;font-weight:700}
    .title p{color:var(--muted);margin-top:6px}

    /* particle field */
    .particles{position:absolute;inset:0;pointer-events:none}
    .particle{position:absolute;font-size:12px;opacity:.9;filter:drop-shadow(0 6px 18px rgba(255,101,150,0.12))}

    /* timer box */
    .timer-wrap{display:flex;gap:12px;align-items:center}
    .time-pill{
      background:linear-gradient(180deg,#fff,#fff0f8);
      border-radius:14px;padding:10px 14px;min-width:78px;text-align:center;box-shadow:0 10px 24px rgba(255,101,150,0.08);
      transform-origin:center;transition:transform .18s cubic-bezier(.2,.9,.2,1);
    }
    .time-pill.pop{transform:translateY(-6px) scale(1.03)}
    .time-pill .num{font-weight:700;font-size:1.4rem;color:var(--text)}
    .time-pill .label{font-size:0.72rem;color:var(--muted);margin-top:4px}

    .actions{display:flex;gap:10px;align-items:center}
    .btn{background:var(--accent);border:none;color:white;padding:10px 14px;border-radius:999px;font-weight:600;cursor:pointer;box-shadow:0 8px 18px rgba(255,111,158,0.15);}
    .btn.ghost{background:transparent;color:var(--accent);border:2px solid rgba(255,111,158,0.12)}

    /* envelope stage */
    .stage{position:absolute;inset:0;display:grid;place-items:center;pointer-events:auto}
    .envelope{
      width:220px;height:140px;border-radius:16px;background:linear-gradient(180deg,#FFDFF0,#FFEDF6);display:grid;place-items:center;box-shadow:0 14px 40px rgba(80,18,40,0.12);transform-origin:center;transition:transform .45s cubic-bezier(.2,.9,.2,1)
    }
    .envelope .seal{width:58px;height:58px;border-radius:100px;background:linear-gradient(180deg,#FF6F9E,#FF2E6D);display:grid;place-items:center;color:white;font-size:22px;box-shadow:0 8px 20px rgba(255,101,150,0.18)}
    .envelope:hover{transform:translateY(-8px) rotate(-2deg)}

    /* envelope open animations */
    .envelope.open{height:240px;padding-top:18px}
    .scroll-paper{width:84%;height:72%;background:linear-gradient(180deg,#fff8f0,#FFF6EC);border-radius:12px;padding:20px;box-shadow:0 18px 40px rgba(0,0,0,0.08);transform-origin:top;overflow:auto}

    .scroll-paper .handtext{font-family:'Dancing Script',cursive;font-size:20px;line-height:1.4;color:var(--text)}

    /* Tulips garden */
    .garden{display:flex;gap:18px;align-items:flex-end;margin-top:18px}
    .tulip{width:84px;height:160px;display:flex;flex-direction:column;align-items:center;justify-content:flex-end}
    .stem{width:6px;background:linear-gradient(180deg,#69b06f,#2f7a4b);border-radius:8px;transition:height .9s cubic-bezier(.2,.8,.2,1);}
    .bloom{width:46px;height:46px;border-radius:50% 50% 45% 45%;background:linear-gradient(180deg,#FF98BE,#FF6F9E);transform-origin:bottom center;transition:transform .9s cubic-bezier(.2,.8,.2,1);box-shadow:0 10px 24px rgba(255,105,160,0.15)}

    /* butterflies */
    .butter{position:absolute;pointer-events:none;font-size:28px;opacity:0.95;transform-origin:center}

    /* footer */
    footer{display:flex;justify-content:center;gap:12px;padding:12px}
    footer p{color:var(--muted);font-size:0.9rem}

    /* responsive */
    @media (max-width:640px){
      .app{padding:18px;border-radius:16px}
      .envelope{width:180px;height:120px}
      .time-pill{min-width:60px}
    }
  </style>
</head>
<body class="heart-cursor">

  <div id="cursor" class="custom-cursor">üíó</div>

  <div class="app" role="main" aria-label="Happy Birthdayy </3 ">
    <header>
      <div class="logo">
        <div class="mark">ü•Ä</div>
        <div>
          <h3>24 Jan 2026</h3>
          <div style="font-size:12px;color:var(--muted)">Someone got older .. </div>
        </div>
      </div>

      <div class="controls">
        <button class="btn ghost" id="soundToggle" title="toggle music">üîà</button>
        <button class="btn" id="previewBtn">Preview</button>
      </div>
    </header>

    <div class="main">
      <div class="particles" aria-hidden="true"></div>

      <div class="title">
        <h1>HOORIA KHAN </3</h1>
        <p> Ma sha Allah , Itni bhari ho gye .. </p>
      </div>

      <div class="timer-wrap" aria-hidden="false">
        <div class="time-pill" id="pillDays"><div class="num" id="days">00</div><div class="label">Days üíó</div></div>
        <div class="time-pill" id="pillHours"><div class="num" id="hours">00</div><div class="label">Hours üéÄ</div></div>
        <div class="time-pill" id="pillMins"><div class="num" id="minutes">00</div><div class="label">Mins üå∏</div></div>
        <div class="time-pill" id="pillSecs"><div class="num" id="seconds">00</div><div class="label">Secs ‚ú®</div></div>
      </div>

      <div style="display:flex;gap:12px;margin-top:6px">
       <!-- <button class="btn" id="openNow">Open (Only for me)</button>
        <button class="btn ghost" id="explain">How it works</button> -->
      </div>

      <!-- Stage area for envelope/scroll/garden -->
      <div class="stage" id="stageArea" aria-live="polite"></div>

    </div>

    <footer>
      <p> Tried hard , Hopefully you'll like it a lil... </p>
    </footer>
  </div>

  <!-- Single-file assets and templates -->
  <template id="envelopeTpl">
    <div style="display:flex;flex-direction:column;align-items:center;gap:10px">
      <div class="envelope" id="envelopeEl" role="button" aria-pressed="false" tabindex="0">
        <div class="seal">üíå</div>
      </div>
      <div style="font-size:20px;color:var(--muted)">So .. Nothing special inside but open karaien </div>
    </div>
  </template>

  <template id="scrollTpl">
    <div style="display:flex;flex-direction:column;align-items:center;width:100%">
      <div class="envelope open" style="width:92%;max-width:560px;padding:18px;">
        <div class="scroll-paper" id="scrollPaper">
          <div class="handtext" id="letterText"></div>
        </div>
      </div>

      <div class="garden" id="garden">
        <div class="tulip" data-index="0"><div class="stem" style="height:0"></div><div class="bloom" style="transform:scale(0)"></div></div>
        <div class="tulip" data-index="1"><div class="stem" style="height:0"></div><div class="bloom" style="transform:scale(0);background:linear-gradient(180deg,#FFD1E1,#FF8BB3)"></div></div>
        <div class="tulip" data-index="2"><div class="stem" style="height:0"></div><div class="bloom" style="transform:scale(0);background:linear-gradient(180deg,#FFDDE6,#FFA6C7)"></div></div>
      </div>
    </div>
  </template>

  <script>
    /* ==========================
       Configuration
       ========================== */
    // TARGET: 24 Jan Pakistan time (year = current or next if passed)
    // IMPORTANT: user wanted specifically "24 Jan Pak time". We'll target 2026-01-24 00:00 PKT.
    const TARGET_ISO = "2026-01-24T00:00:00+05:00";
    const targetDate = new Date(TARGET_ISO).getTime();

    // The letter text (editable here)
    const LETTER_TEXT = `
Happy Birthday üéâüíó\n\n
AH.. Finally 18 ki ho gye üò≠üò≠.. MA SHA ALLAH.. Abhi tou 16 ki thiiii.. Reading old lovely chats and it all feels like yesterday , Had shocks reading the dates .. Like everything still clear in mind , The scene , The feelings , The emotions , The fun , The prayers .. Everythng felt unreal at that time , The world felt complete even though it wasn't , Life had purpose , Things were planned and lot of happy moments imagined , I remember my 18th birthday , The way yuh wished .. The way yuh motivated .. The way .. The list goes on and can't be written easily .. Now you're 18 ..But Things are quite different .. Different ? Yeah it's wayy tooooooooo small word compared to the realiy, But yeah can't wish you the same way even though trying.. , But I DID tried the best to be always there and show you and prove to you all the time , Everything is now lost , crushed and broken but My best wishes and prayers will always be with you , I have never wished harm or bad for you and replaced it with some prayer in some hard times , Afterall still couldn't miss your special day.. For the end IDK What's really happening in life or what's gonna happen .. Everything ........ right now :) BUT ..
ALLAH KHAIR KARAY... , Fe Iman Illah :) üå∑                                                                                    `;

    /* ==========================
       Helpers & DOM
       ========================== */
    const $ = id => document.getElementById(id);
    const stage = $('stageArea');
    const previewBtn = $('previewBtn');
    const openNow = $('openNow');
    const explain = $('explain');
    const soundToggle = $('soundToggle');

    // Timer elements
    const daysEl = $('days'), hoursEl = $('hours'), minutesEl = $('minutes'), secondsEl = $('seconds');
    const pillDays = $('pillDays'), pillHours = $('pillHours'), pillMins = $('pillMins'), pillSecs = $('pillSecs');

    /* ==========================
       Cursor heart
       ========================== */
    const cursor = $('cursor');
    window.addEventListener('mousemove', e => {
      cursor.style.left = e.clientX + 'px';
      cursor.style.top = e.clientY + 'px';
    });

    /* ==========================
       Particles (hearts & sparkles)
       ========================== */
    const particlesHost = document.querySelector('.particles');
    function spawnParticles(){
      const count = 10;
      for(let i=0;i<count;i++){
        const el = document.createElement('div');
        el.className = 'particle';
        el.textContent = ['‚ú®','üíï','üå∏'][Math.floor(Math.random()*3)];
        const size = 10 + Math.random()*12;
        el.style.fontSize = size+'px';
        el.style.left = (10 + Math.random()*80) + '%';
        el.style.top = (5 + Math.random()*70) + '%';
        el.style.opacity = 0.6 + Math.random()*0.6;
        particlesHost.appendChild(el);
        // animate float
        el.animate([
          {transform: `translateY(0) scale(1)`, opacity: el.style.opacity},
          {transform: `translateY(-40px) scale(.9)`, opacity: 0}
        ],{duration:4000+Math.random()*4000,iterations:1,easing:'cubic-bezier(.2,.9,.2,1)'}).onfinish = ()=>el.remove();
      }
    }
    setInterval(spawnParticles,1400);

    /* ==========================
       Timer logic
       ========================== */
    function updateTimer(){
      const now = Date.now();
      let diff = targetDate - now;
      if(diff <= 0){
        showEnvelope();
        return;
      }
      const d = Math.floor(diff / (1000*60*60*24));
      diff -= d * (1000*60*60*24);
      const h = Math.floor(diff / (1000*60*60));
      diff -= h * (1000*60*60);
      const m = Math.floor(diff / (1000*60));
      diff -= m * (1000*60);
      const s = Math.floor(diff / 1000);

      daysEl.textContent = String(d).padStart(2,'0');
      hoursEl.textContent = String(h).padStart(2,'0');
      minutesEl.textContent = String(m).padStart(2,'0');
      secondsEl.textContent = String(s).padStart(2,'0');

      // small pop animation on change
      [pillDays,pillHours,pillMins,pillSecs].forEach(el=>el.classList.remove('pop'));
      // pick the pill to pop depending on s
      pillSecs.classList.add('pop');
      setTimeout(()=>pillSecs.classList.remove('pop'),160);
    }
    const timerInterval = setInterval(updateTimer,1000);
    updateTimer();

    /* ==========================
       Envelope / Scroll / Garden flow
       ========================== */
    function clearStage(){ stage.innerHTML = ''; }

    function showEnvelope(){
      clearStage();
      const tpl = document.getElementById('envelopeTpl');
      const node = tpl.content.cloneNode(true);
      stage.appendChild(node);
      const envelopeEl = document.getElementById('envelopeEl');

      // event handlers
      function open(){
        envelopeEl.removeEventListener('click',open);
        envelopeEl.removeEventListener('keydown',onKey);
        revealScroll();
      }
      function onKey(e){ if(e.key==='Enter' || e.key===' ') open(); }
      envelopeEl.addEventListener('click',open);
      envelopeEl.addEventListener('keydown',onKey);

      // accessible focus
      envelopeEl.focus?.();
    }

    function revealScroll(){
      clearStage();
      const tpl = document.getElementById('scrollTpl');
      const node = tpl.content.cloneNode(true);
      stage.appendChild(node);

      // insert letter text nicely (preserve newlines)
      const letterTextEl = document.getElementById('letterText');
      letterTextEl.innerHTML = LETTER_TEXT.replace(/\n/g,'<br><br>');

      // animate tulips growth staggered
      const tulips = Array.from(document.querySelectorAll('.tulip'));
      tulips.forEach((t,i)=>{
        const bloom = t.querySelector('.bloom');
        const stem = t.querySelector('.stem');
        
        setTimeout(()=>{
          stem.style.height = (80 + Math.random()*40) + 'px';
          bloom.style.transform = 'scale(1)';
        }, 600 + i*420);
      });

      // gentle butterflies
      spawnButterflies();
    }

    function spawnButterflies(){
      const butterflies = ['ü¶ã','üßö‚Äç‚ôÄÔ∏è'];
      for(let i=0;i<5;i++){
        const el = document.createElement('div');
        el.className = 'butter';
        el.textContent = butterflies[Math.floor(Math.random()*butterflies.length)];
        document.body.appendChild(el);
        const startX = Math.random()*80 + 8; const startY = 60 + Math.random()*20;
        el.style.left = startX + '%'; el.style.top = startY + '%';
        const dur = 5000 + Math.random()*4000;
        el.animate([
          {transform:'translateY(0) rotate(0) scale(0.9)',opacity:0},
          {transform:`translateY(-120px) rotate(120deg) scale(1.05)`,opacity:1, offset:0.4},
          {transform:'translateY(-260px) rotate(240deg) scale(0.9)',opacity:0}
        ],{duration:dur,iterations:1,easing:'cubic-bezier(.2,.9,.2,1)'}).onfinish = ()=>el.remove();
      }
    }

    /* ==========================
       Controls binding
       ========================== */
    previewBtn.addEventListener('click',()=>{
      // stop timer and show envelope immediately
      clearInterval(timerInterval);
      showEnvelope();
    });
    openNow.addEventListener('click',()=>{
      clearInterval(timerInterval);
      showEnvelope();
    });
    explain.addEventListener('click',()=>{
      alert('This page counts down to 24 Jan (Pakistan time). When the timer ends, a sealed envelope appears. Click the envelope to open a gentle scroll with the birthday message and a tulip scene.\n\nPreview button opens it for you only (keeps it private).');
    });

   // ---------- OPTION A: Built-in WebAudio soft loop ----------
let audioCtx = null;
let masterGain = null;
let synthLoopHandle = null;
let synthPlaying = false;

// create/resume context on first user gesture
function ensureAudioContext(){
  if(!audioCtx){
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    masterGain = audioCtx.createGain();
    masterGain.gain.value = 0.06;
    masterGain.connect(audioCtx.destination);
  } else if(audioCtx.state === 'suspended'){
    audioCtx.resume().catch(()=>{});
  }
}

// one short musical sequence (non-intrusive)
function playSynthSequence(){
  const now = audioCtx.currentTime;
  const freqs = [440, 0, 660, 0, 554, 0, 440]; // small motif
  freqs.forEach((f,i)=>{
    if(f <= 0) return;
    const o = audioCtx.createOscillator();
    const g = audioCtx.createGain();
    o.type = 'sine';
    o.frequency.value = f;
    g.gain.value = 0;
    o.connect(g); g.connect(masterGain);
    const t = now + i * 0.48;
    g.gain.setValueAtTime(0, t);
    g.gain.linearRampToValueAtTime(0.06, t + 0.04);
    g.gain.linearRampToValueAtTime(0, t + 0.46);
    o.start(t); o.stop(t + 0.5);
  });
}

// Start/stop loop
function startSynthLoop(){
  if(synthPlaying) return;
  ensureAudioContext();
  playSynthSequence();
  synthLoopHandle = setInterval(playSynthSequence, 3200); // repeat the motif
  synthPlaying = true;
  if(typeof setAudioIcon === 'function') setAudioIcon(true);
}
function stopSynthLoop(){
  if(!synthPlaying) return;
  clearInterval(synthLoopHandle);
  synthLoopHandle = null;
  synthPlaying = false;
  if(typeof setAudioIcon === 'function') setAudioIcon(false);
}

// Toggle handler for your sound button (example using soundToggle or audioBtn)
soundToggle.addEventListener('click', ()=>{
  // on mobile, ensure we got a gesture to resume the audio context
  ensureAudioContext();
  if(synthPlaying) stopSynthLoop();
  else startSynthLoop();
});

// resume audio context on any first pointerdown (helps mobile)
function resumeOnGesture(){
  if(audioCtx && audioCtx.state === 'suspended') audioCtx.resume().catch(()=>{});
  window.removeEventListener('pointerdown', resumeOnGesture);
}
window.addEventListener('pointerdown', resumeOnGesture, { once: true });


    /* ==========================
       Accessibility: keyboard open
       ========================== */
    document.addEventListener('keydown', (e) => {
      if(e.key === 'o' || e.key === 'O'){
        clearInterval(timerInterval); showEnvelope();
      }
    });

    /* ==========================
       Initial tiny flourish
       ========================== */
    setTimeout(()=>{
      // tiny intro pop
      document.querySelectorAll('.time-pill').forEach((p,i)=>setTimeout(()=>p.classList.add('pop'), i*120));
      setTimeout(()=>document.querySelectorAll('.time-pill').forEach(p=>p.classList.remove('pop')), 900);
    },220);

  </script>
</body>
</html>
